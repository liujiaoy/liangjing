(function($){jQuery.fn.extend({"fixedTableHead":function(newheight){var winScroll="";var winResize="";var $events=$(window).data("events");$(window).off("scroll",winScroll);$(window).off("resize",winResize);$("#meizzCalendarLayer").css("position","fixed");$("#newTableId").remove();var oldTableId=$(this);var scrollTimer;var oldheadertop=0;var oldheaderleft=0;var oldheaderwidth=0;if(oldTableId.length>0){oldheadertop=oldTableId.offset().top;oldheaderleft=oldTableId.offset().left;oldheaderwidth=oldTableId.outerWidth()}var newtable=oldTableId.clone(true);newtable.attr("id","newTableId");if(oldTableId.children("thead").length>0){oldTableId.parent().append(newtable.html(newtable.children("thead")));$("#newTableId").width(oldheaderwidth);var newTr=$("#newTableId").find("tr");for(var i=0;i<newTr.length;i++){var element=newTr.eq(i);element.css("height",oldTableId.find("tr").eq(i).height());for(var j=0;j<element.find("th").length;j++){var elementTh=element.find("th").eq(j);elementTh.width(oldTableId.find("tr").eq(i).find("th:eq("+j+")").width())}}}else{oldTableId.parent().append(newtable.html(newtable.find("tr").eq(0)));var element=$("#newTableId").find("tr").eq(0);element.css("height",oldTableId.find("tr").eq(0).height());for(var j=0;j<element.find("th").length;j++){var elementTh=element.find("th").eq(j);elementTh.width(oldTableId.find("tr").eq(0).find("th:eq("+j+")").width())}}$("#newTableId").css({"position":"fixed","left":oldheaderleft,"width":oldheaderwidth,"display":"none","z-index":100,});newheight=ResizeHeight(oldTableId,newheight);$(window).on("resize",function winResize(){handleResize(oldTableId,newheight)});$(window).on("scroll",function winScroll(){clearTimeout(scrollTimer);scrollTimer=setTimeout(function(){handleResize(oldTableId,newheight);var newheight2;if(newheight==undefined){newheight2=oldTableId.offset().top}else{newheight2=newheight}var dist=oldTableId.offset().top-newheight2-$(window).scrollTop();if(dist<0){$("#newTableId").show()}else{$("#newTableId").hide()}},250);var w=oldTableId.offset().left;var c=$(this).scrollLeft();$("#newTableId").css({"left":-c+w})})},"fillHead":function(){$(".fillHeadbcg").remove();var fillHead=$(this);fillHead.css({"position":"fixed","top":0,"width":"100%","background-color":"#fff","z-index":100});$("body").prepend('<div class="fillHeadbcg"></div>');$(".fillHeadbcg").height(fillHead.innerHeight());$(".fillHeadbcg").css({"position":"relative","top":0,"left":0,"width":"100%","background-color":"#fff"});$(window).resize(function(){$(".fillHeadbcg").height(fillHead.innerHeight())})}})})(jQuery);function handleResize(oldTableId,newheight){ResizeHeight(oldTableId,newheight);$("#newTableId").width(oldTableId.outerWidth());if(oldTableId.children("thead").length>0){var newTr=$("#newTableId").find("tr");for(var i=0;i<newTr.length;i++){var element=newTr.eq(i);element.css("height",oldTableId.find("tr").eq(i).height());for(var j=0;j<element.find("th").length;j++){var elementTh=element.find("th").eq(j);elementTh.width(oldTableId.find("tr").eq(i).find("th:eq("+j+")").width())}}}else{var element=$("#newTableId").find("tr").eq(0);element.css("height",oldTableId.find("tr").eq(0).height());for(var j=0;j<element.find("th").length;j++){var elementTh=element.find("th").eq(j);elementTh.width(oldTableId.find("tr").eq(0).find("th:eq("+j+")").width())}}}function ResizeHeight(oldTableId,newheight){if(newheight==undefined){$("#newTableId").css({"top":oldTableId.offset().top})}else{$("#newTableId").css({"top":newheight})}return newheight};